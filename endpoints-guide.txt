===========================
 Kid Buu Leaderboard Backend - API Endpoints
===========================

üåê Base URL (local):
http://localhost:3000

---

üìä Core Endpoints
-----------------

1) /leaderboard
- URL: http://localhost:3000/leaderboard
- Returns: JSON array of the top 250 holders
- Fields: rank, wallet, balance, pct, multiplier, entries, currentValue, formRequired

2) /myentries?wallet=<WALLET_ADDRESS>
- URL Example: http://localhost:3000/myentries?wallet=YourWalletPubkey
- Returns: JSON object with stats for a single wallet
- Use case: MiniAppCard after connect-wallet

3) /wallet/:address
- URL Example: http://localhost:3000/wallet/YourWalletPubkey
- Returns: Same as /myentries but REST-style
- Use case: Manual lookup / debug

4) /price
- URL: http://localhost:3000/price
- Returns: { token, price, source, lastUpdated }
- Price sources: Pump.fun ‚Üí DexScreener ‚Üí Jupiter (fallback)

5) /supply
- URL: http://localhost:3000/supply
- Returns: { token, supply, lastUpdated }
- Uses Helius getTokenSupply

6) /snapshot.json
- URL: http://localhost:3000/snapshot.json
- Returns: Current leaderboard (minimal form: wallet, entries, balance, rank)

7) /download-snapshot.json
- URL: http://localhost:3000/download-snapshot.json
- Downloads the full cached leaderboard JSON as a file

8) /download
- URL: http://localhost:3000/download
- Downloads a PDF snapshot of the current leaderboard
- Fields: Rank, Wallet, Balance, % Supply, Multiplier, Entries, Current Value, Source, Form Required

---

üéØ Milestone Testing Endpoints
------------------------------

9) /test200m
- URL: http://localhost:3000/test200m
- Simulates hitting $200M market cap
- Saves: 200M_commit_test.json + 200M_snapshot_test.json

10) /test300m
- URL: http://localhost:3000/test300m
- Simulates hitting $300M market cap
- Saves: 300M_snapshot_test.json

11) /download-200m-commit-test
- URL: http://localhost:3000/download-200m-commit-test
- Downloads the test $200M commit JSON

12) /download-200m-snapshot-test
- URL: http://localhost:3000/download-200m-snapshot-test
- Downloads the test $200M snapshot JSON

13) /download-300m-snapshot-test
- URL: http://localhost:3000/download-300m-snapshot-test
- Downloads the test $300M snapshot JSON

---

üíæ Milestone Download Endpoints (LIVE)
--------------------------------------

14) /download-200m-commit
- URL: http://localhost:3000/download-200m-commit
- Downloads the $200M commit JSON (slot + offset + backup versions exist)

15) /download-200m-snapshot
- URL: http://localhost:3000/download-200m-snapshot
- Downloads the $200M holder snapshot JSON

16) /download-300m-snapshot
- URL: http://localhost:3000/download-300m-snapshot
- Downloads the $300M holder snapshot JSON

---

üõ†Ô∏è How to run locally:
1. Install deps:
   npm install express node-fetch pdfkit dotenv @solana/web3.js

2. Add a `.env` file with:
   PORT=3000  
   DEFAULT_TOKEN=<your token mint>  
   HELIUS_KEY=<your helius key>

3. Start server:
   node server.js

4. Open the URLs in your browser (above) to test endpoints.

---

üí° Notes:
- Leaderboard auto-updates every 15 minutes (configurable in UPDATE_INTERVAL).
- Cached price is refreshed each update and on-demand via /price.
- Milestones automatically trigger when real marketCap crosses $200M and $300M.
- Test endpoints only write to `_test.json` files (never overwrite live data).
- Live milestones also generate timestamped backup files for audit-proof history.

üéØ Milestone Testing Endpoints
- Also serve as manual snapshot mode: trigger commits/snapshots on demand without waiting for market cap.
- Test files never overwrite live milestone files.

===========================
